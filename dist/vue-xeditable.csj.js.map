{"version":3,"file":"vue-xeditable.csj.js","sources":["../src/components/XEditable.vue","../src/main.js"],"sourcesContent":["<template>\n  <div class='vue-xeditable'>\n    <span\n      class=\"value\"\n      :class=\"{'empty': $_VueXeditable_isValueEmpty}\"\n      v-show='!editable_mode && !loading'\n      @click='toggle_editable_mode'\n      v-html='display_value()'>\n    </span>\n\n    <div\n      v-show='editable_mode && !loading'\n      class='vue-xeditable-control'\n    >\n\n      <input\n        type=\"text\"\n        :value=\"val\"\n        @blur='editable_changed'\n        @keydown='keydown'\n        v-if='type == \"text\"'\n        class='vue-form-control'\n        autofocus\n      >\n\n      <textarea\n        @blur='editable_changed'\n        @keydown='keydown'\n        v-else-if='type == \"textarea\"'\n        class='vue-form-control'\n      >\n        {{val}}\n      </textarea>\n\n      <input\n        type=\"number\"\n        :value=\"val\"\n        @blur='editable_changed'\n        @keydown='keydown'\n        v-if='type == \"number\"'\n        class='vue-form-control'\n      >\n\n      <select\n        @change='editable_changed'\n        v-if='type == \"select\"'\n        class='vue-form-control'\n      >\n        <option\n          v-for='option in options'\n          :value=\"option[1]\"\n        >\n          {{option[0]}}\n        </option>\n      </select>\n\n    </div>\n\n    <div class='editable-loader' v-show='loading'></div>\n\n  </div>\n</template>\n\n<script>\n  import Vue from 'vue'\n  import axios from 'axios'\n\n  export default {\n    name: 'vue-xeditable',\n    props: {\n      onblur: {\n        type: Function,\n        required: false,\n        default: function () {\n        }\n      },\n      value: {\n        type: [String, Number]\n      },\n      height: {\n        type: Number,\n        default: 350\n      },\n      attr: {\n        type: String,\n        required: false,\n        default: ''\n      },\n      method: {\n        type: String,\n        required: false,\n        default: 'POST'\n      },\n      options: {\n        type: Array\n      },\n      resource: {\n        type: String,\n        required: false,\n        default: null\n      },\n      type: {\n        type: String,\n        required: false,\n        default: 'text'\n      },\n      url: {\n        type: String,\n        required: false,\n      },\n      headers: {\n        type: Object,\n        required: false,\n        default: null\n      },\n      title: {\n        type: String,\n        required: false,\n        default: ''\n      },\n      clear: {\n        type: Boolean,\n        required: false,\n        default: false\n      },\n      empty: {\n        type: String,\n        required: false,\n        default: 'Empty'\n      },\n      placeholder: {\n        type: String,\n        required: false,\n        default: ''\n      }\n    },\n    data () {\n      return {\n        editable_mode: false,\n        loading: false,\n        val: this.value\n      }\n    },\n    watch: {\n      value (val) {\n        this.val = val\n      }\n    },\n    computed: {\n      $_VueXeditable_isValueEmpty () {\n        return this.val === null || this.val === ''\n      }\n    },\n    methods: {\n      display_value () {\n        if (this.$_VueXeditable_isValueEmpty) {\n          return this.empty\n        }\n        if (this.type === 'select') {\n          let opt = this.options.find(o => {\n            return option[1] === this.val\n          })\n          return opt[0]\n        }\n        return this.val\n      },\n      toggle_editable_mode (e) {\n        this.editable_mode = !this.editable_mode\n        let that = this\n        if (this.editable_mode) {\n          setTimeout(function () {\n            let inputs = e.target.nextElementSibling.children\n            inputs.forEach(i => {\n              i.focus()\n            })\n            that.$emit('show')\n          }, 100)\n        } else {\n          this.$emit('hide')\n        }\n      },\n      keydown (e) {\n        if (e.keyCode === 13) this.editable_changed(e)\n      },\n      get_value (el) {\n        switch (this.type) {\n          case 'textarea':\n          case 'text':\n          case 'number':\n          case 'select':\n            return el.value\n          default:\n            return ''\n        }\n      },\n      editable_changed (e) {\n        let value = this.get_value(e.target)\n        if (this.url && this.url.length && value !== this.val) {\n          this.send_request(value)\n        } else {\n          this.value_did_changed(value)\n        }\n        this.$emit('change', value)\n      },\n      value_did_changed (value) {\n        this.editable_mode = false\n        this.onblur()\n        this.$emit('update:value', value)\n        this.val = value\n        this.loading = false\n      },\n      value_change_error (value) {\n        this.onblur()\n        this.loading = false\n      },\n      send_request (value) {\n        this.loading = true\n        let data = {}\n        data[this.attr] = value\n        if (this.resource) {\n          let temp = {}\n          temp[this.resource] = data\n          data = temp\n        }\n        axios({\n          method: this.method,\n          url: this.url,\n          data: data,\n          headers: this.headers || {}\n        }).then(response => {\n          this.value_did_changed(value)\n        }).catch(error => {\n          this.loading = false\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .vue-xeditable {\n    width: auto;\n    color: #222;\n    cursor: pointer;\n    position: relative;\n    display: inline-block;\n  }\n\n  .vue-xeditable:hover {\n    color: #666;\n  }\n\n  .vue-form-control {\n    display: block;\n    width: 100%;\n    padding: 5px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n    outline: none;\n  }\n\n  .vue-xeditable .value {\n    white-space: pre-wrap;\n  }\n\n  .vue-xeditable .empty {\n    color: #ea0002;\n    font-style: italic;\n  }\n\n  .editable-loader,\n  .editable-loader:before,\n  .editable-loader:after {\n    background: #999;\n    -webkit-animation: load1 1s infinite ease-in-out;\n    animation: load1 1s infinite ease-in-out;\n    width: 2px;\n    height: 2px;\n  }\n\n  .editable-loader {\n    position: absolute;\n    color: #999;\n    text-indent: -9999em;\n    margin: 3px;\n    font-size: 1px;\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n    -webkit-animation-delay: -0.16s;\n    animation-delay: -0.16s;\n    top: 0;\n    left: 0;\n  }\n\n  .editable-loader:before,\n  .editable-loader:after {\n    position: absolute;\n    top: 0;\n    content: '';\n  }\n\n  .editable-loader:before {\n    left: -5px;\n    -webkit-animation-delay: -0.32s;\n    animation-delay: -0.32s;\n  }\n\n  .editable-loader:after {\n    left: 5px;\n  }\n\n  .vue-xeditable-control {\n    width: 100%;\n    display: inline-block;\n  }\n\n  .vue-editable-button {\n    display: inline-block;\n    padding: 3px 5px;\n    margin-bottom: 0;\n    font-size: 14px;\n    font-weight: normal;\n    line-height: 1.42857143;\n    text-align: center;\n    white-space: nowrap;\n    vertical-align: middle;\n    cursor: pointer;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    background-image: none;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #fff;\n    background: #07c;\n    float: right;\n    margin-top: 10px;\n  }\n\n  @-webkit-keyframes load1 {\n    0%,\n    80%,\n    100% {\n      box-shadow: 0 0;\n      height: 20px;\n    }\n    40% {\n      box-shadow: 0 -2em;\n      height: 5px;\n    }\n  }\n\n  @keyframes load1 {\n    0%,\n    80%,\n    100% {\n      box-shadow: 0 0;\n      height: 10px;\n    }\n    40% {\n      box-shadow: 0 -2em;\n      height: 5px;\n    }\n  }\n</style>\n","import XEditable from './components/XEditable.vue'\n\nlet VueXEditable = {}\n\nVueXEditable.install = function (Vue, options) {\n  Vue.component('VueXEditable', XEditable)\n}\n\nexport default VueXEditable\n\n"],"names":["let","this"],"mappings":"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"}