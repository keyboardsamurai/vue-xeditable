{"version":3,"file":"vue-xeditable.csj.js","sources":["../src/components/XEditable.vue","../src/main.js"],"sourcesContent":["<template>\n  <div class='vue-xeditable'>\n    <span\n      class=\"vue-xeditable-value\"\n      :class=\"{'vue-xeditable-empty': $_VueXeditable_isValueEmpty}\"\n      v-show='!isEditing && !isRemoteUpdating'\n      @click='$_VueXeditable_startEditing'\n      v-html='$_VueXeditable_getHTMLValue()'>\n    </span>\n\n    <div\n      v-show='isEditing && !isRemoteUpdating'\n      class='vue-xeditable-control'\n    >\n\n      <input\n        type=\"text\"\n        :value=\"rawValue\"\n        @keydown='$_VueXeditable_onKeydown'\n        v-if='type === \"text\"'\n        class='vue-form-control'\n        autofocus\n      >\n\n      <textarea\n        @keydown='$_VueXeditable_onKeydown'\n        v-else-if='type === \"textarea\"'\n        class='vue-form-control'\n      >\n        {{rawValue}}\n      </textarea>\n\n      <input\n        type=\"number\"\n        :value=\"rawValue\"\n        @keydown='$_VueXeditable_onKeydown'\n        v-else-if='type === \"number\"'\n        class='vue-form-control'\n      >\n\n      <select\n        @change='$_VueXeditable_valueDidChange'\n        v-else-if='type === \"select\"'\n        class='vue-form-control'\n      >\n        <option\n          v-for='option in options'\n          :value=\"option[1]\"\n        >\n          {{option[0]}}\n        </option>\n      </select>\n\n    </div>\n\n    <div class='editable-loader' v-show='isRemoteUpdating'></div>\n\n  </div>\n</template>\n\n<script>\n  import Vue from 'vue'\n  import axios from 'axios'\n\n  export default {\n    name: 'vue-xeditable',\n    props: {\n      value: {\n        type: [String, Number]\n      },\n      type: {\n        type: String,\n        required: false,\n        default: 'text'\n      },\n      empty: {\n        type: String,\n        required: false,\n        default: 'Empty'\n      },\n      placeholder: {\n        type: String,\n        required: false,\n        default: ''\n      },\n      options: {\n        type: Array\n      },\n      remote: {\n        type: Object,\n        required: false,\n        default: function () {\n          return {\n            url: null,\n            method: 'PUT',\n            key: null,\n            resource: null,\n            headers: null\n          }\n        }\n      }\n    },\n    data () {\n      return {\n        isEditing: false,\n        isRemoteUpdating: false,\n        rawValue: this.value\n      }\n    },\n    watch: {\n      value (newValue) {\n        this.rawValue = newValue\n      }\n    },\n    computed: {\n      $_VueXeditable_isValueEmpty () {\n        return this.rawValue === null || this.rawValue === undefined || this.rawValue === ''\n      },\n      $_VueXeditable_hasRemoteUpdate () {\n        return this.remote && this.remote.url && this.remote.url.length && this.remote.key && this.remote.key.length\n      },\n      $_VueXeditable_hasValidRemote () {\n        return this.$_VueXeditable_hasRemoteUpdate() && ['PUT', 'POST'].includes(this.remote.method.toUpperCase())\n      }\n    },\n    methods: {\n      $_VueXeditable_getHTMLValue () {\n        if (this.$_VueXeditable_isValueEmpty) {\n          return this.empty\n        }\n        if (this.type === 'select') {\n          let opt = this.options.find(o => {\n            return option[1] === this.rawValue\n          })\n          return opt[0]\n        }\n        return this.rawValue\n      },\n      $_VueXeditable_onKeydown (e) {\n        if (e.keyCode === 13) {\n          this.$_VueXeditable_stopEditing(e)\n          this.$_VueXeditable_valueDidChange(e)\n        }\n        else if (e.keyCode === 27) {\n          this.$_VueXeditable_stopEditing(e)\n        }\n      },\n      $_VueXeditable_startEditing (e) {\n        this.isEditing = true\n        let that = this\n        that.$emit('start-editing', e, this.rawValue)\n        setTimeout(function () {\n          let inputs = Array.from(e.target.nextElementSibling.children)\n          inputs.forEach(i => {\n            i.focus()\n          })\n        }, 100)\n      },\n      $_VueXeditable_stopEditing (e) {\n        this.isEditing = false\n        this.$emit('stop-editing', e, this.rawValue)\n      },\n      $_VueXeditable_valueDidChange (e) {\n        let newValue = e.target.value\n        if (this.$_VueXeditable_hasValueChanged(newValue)) {\n          this.$emit('value-will-change', e, this.rawValue)\n\n          if (this.$_VueXeditable_hasRemoteUpdate) {\n            if (this.$_VueXeditable_hasValidRemote) {\n              this.$_VueXeditable_sendRemoteUpdate(newValue)\n                .then(() => {\n                  this.$emit('value-did-change', e, newValue)\n                })\n                .catch((error) => {\n                  this.$emit('value-remote-update-error', e, newValue, error)\n                })\n            } else {\n              console.error('VueXEditable Error: Invalid Remote Update configuration.')\n            }\n          } else {\n            this.$_VueXeditable_makeLocalUpdate(newValue)\n            this.$emit('value-did-change', e, newValue)\n          }\n        }\n      },\n      $_VueXeditable_hasValueChanged (newValue) {\n        return newValue !== this.rawValue\n      },\n      $_VueXeditable_makeLocalUpdate (newValue) {\n        this.rawValue = newValue\n      },\n      $_VueXeditable_sendRemoteUpdate (newValue) {\n        let payload = {}\n\n        if (this.remote.resource && this.remote.resource.length) {\n          let subpayload = {}\n          subpayload[this.remote.key] = newValue\n          payload[this.remote.resource] = subpayload\n        } else {\n          payload[this.remote.key] = newValue\n        }\n\n        return new Promise((resolve, reject) => {\n          this.isRemoteUpdating = true\n          axios({\n            method: this.remote.method,\n            url: this.remote.url,\n            headers: this.remote.headers || {},\n            data: payload\n          })\n            .then(response => {\n              this.isRemoteUpdating = false\n              this.$_VueXeditable_makeLocalUpdate(newValue)\n              resolve(newValue)\n            })\n            .catch(error => {\n              this.isRemoteUpdating = false\n              reject(error)\n            })\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .vue-xeditable {\n    width: auto;\n    color: #222;\n    cursor: pointer;\n    position: relative;\n    display: inline-block;\n  }\n\n  .vue-xeditable:hover {\n    color: #666;\n  }\n\n  .vue-form-control {\n    display: block;\n    width: 100%;\n    padding: 5px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n    outline: none;\n  }\n\n  .vue-xeditable-value {\n    white-space: pre-wrap;\n  }\n\n  .vue-xeditable-empty {\n    color: #ea0002;\n    font-style: italic;\n  }\n\n  .editable-loader,\n  .editable-loader:before,\n  .editable-loader:after {\n    background: #999;\n    -webkit-animation: load1 1s infinite ease-in-out;\n    animation: load1 1s infinite ease-in-out;\n    width: 2px;\n    height: 2px;\n  }\n\n  .editable-loader {\n    position: absolute;\n    color: #999;\n    text-indent: -9999em;\n    margin: 3px;\n    font-size: 1px;\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n    -webkit-animation-delay: -0.16s;\n    animation-delay: -0.16s;\n    top: 0;\n    left: 0;\n  }\n\n  .editable-loader:before,\n  .editable-loader:after {\n    position: absolute;\n    top: 0;\n    content: '';\n  }\n\n  .editable-loader:before {\n    left: -5px;\n    -webkit-animation-delay: -0.32s;\n    animation-delay: -0.32s;\n  }\n\n  .editable-loader:after {\n    left: 5px;\n  }\n\n  .vue-xeditable-control {\n    width: 100%;\n    display: inline-block;\n  }\n\n  .vue-editable-button {\n    display: inline-block;\n    padding: 3px 5px;\n    margin-bottom: 0;\n    font-size: 14px;\n    font-weight: normal;\n    line-height: 1.42857143;\n    text-align: center;\n    white-space: nowrap;\n    vertical-align: middle;\n    cursor: pointer;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    background-image: none;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #fff;\n    background: #07c;\n    float: right;\n    margin-top: 10px;\n  }\n\n  @-webkit-keyframes load1 {\n    0%,\n    80%,\n    100% {\n      box-shadow: 0 0;\n      height: 20px;\n    }\n    40% {\n      box-shadow: 0 -2em;\n      height: 5px;\n    }\n  }\n\n  @keyframes load1 {\n    0%,\n    80%,\n    100% {\n      box-shadow: 0 0;\n      height: 10px;\n    }\n    40% {\n      box-shadow: 0 -2em;\n      height: 5px;\n    }\n  }\n</style>\n","import XEditable from './components/XEditable.vue'\n\nlet VueXEditable = {}\n\nVueXEditable.install = function (Vue, options) {\n  Vue.component('VueXEditable', XEditable)\n}\n\nexport default VueXEditable\n\n"],"names":["let","this"],"mappings":"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"}