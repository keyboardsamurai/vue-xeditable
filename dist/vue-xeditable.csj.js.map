{"version":3,"file":"vue-xeditable.csj.js","sources":["../src/components/XCustomSelect.vue","../src/components/XEditable.vue","../src/main.js"],"sourcesContent":["<template class=\"custom-select\">\n  <select\n    :value=\"value\"\n    @change=\"onChange($event.target.value)\"\n    ref=\"$_VueXeditable_Select\"\n  >\n    <option\n      v-for=\"option in options\"\n      :key=\"(isKeyFirst) ? option[0] : option[1]\"\n      :value=\"(isKeyFirst) ? option[0] : option[1]\"\n      :selected=\"isSelected(option)\"\n      ref=\"options\"\n    >\n      {{ (isKeyFirst) ? option[1] : option[0] }}\n    </option>\n  </select>\n</template>\n\n<script>\n  export default {\n    template: '#custom-select',\n    props: ['value', 'options', 'isKeyFirst'],\n    mounted () {\n      this.$refs.$_VueXeditable_Select.addEventListener('keydown', this.onKeyDown, false)\n    },\n    beforeDestroy () {\n      this.$refs.$_VueXeditable_Select.removeEventListener('keydown', this.onKeyDown, false)\n    },\n    methods: {\n      onChange (keyValue) {\n        let opt = this.options.find(o => {\n          let optKey = (this.isKeyFirst) ? o[0] : o[1]\n          return optKey.toString() === keyValue\n        })\n        this.$emit('input', opt) // MUST be called 'input'\n      },\n      isSelected (option) {\n        return option === this.value\n      },\n      onKeyDown (e) {\n        this.$emit('keydown', e)\n      }\n    }\n  }\n</script>\n","<template>\n  <div class='vue-xeditable'>\n    <span\n      class=\"vue-xeditable-value\"\n      :class=\"{'vue-xeditable-empty': $_VueXeditable_isValueEmpty}\"\n      v-show='!isEditing && !isRemoteUpdating'\n      @click='$_VueXeditable_startEditing'\n      v-html='$_VueXeditable_getHTMLValue()'>\n    </span>\n\n    <div\n      v-show='isEditing && !isRemoteUpdating'\n      class='vue-xeditable-control'\n    >\n\n      <input\n        type=\"text\"\n        :value=\"rawValue\"\n        @keydown='$_VueXeditable_onKeydown'\n        v-if='type === \"text\"'\n        class='vue-form-control'\n        autofocus\n      >\n\n      <textarea\n        @keydown='$_VueXeditable_onKeydown'\n        v-else-if='type === \"textarea\"'\n        class='vue-form-control'\n      >\n        {{rawValue}}\n      </textarea>\n\n      <input\n        type=\"number\"\n        :value=\"rawValue\"\n        @keydown='$_VueXeditable_onKeydown'\n        v-else-if='type === \"number\"'\n        class='vue-form-control'\n      >\n\n      <x-custom-select\n        type=\"select\"\n        v-model=\"rawValue\"\n        :options=\"$_VueXeditable_rawOptions\"\n        :isKeyFirst=\"isOptionKeyFirst\"\n        @input='$_VueXeditable_valueDidChange'\n        @keydown=\"$_VueXeditable_onKeydown\"\n        v-else-if='type === \"select\"'\n        class='vue-form-control'\n      >\n      </x-custom-select>\n\n    </div>\n\n    <div class='editable-loader' v-show='isRemoteUpdating'></div>\n\n  </div>\n</template>\n\n<script>\n  import Vue from 'vue'\n  import axios from 'axios'\n  import XCustomSelect from './XCustomSelect.vue'\n\n  const $_VueXeditable_emptyOptionValue = -999999999\n\n  export default {\n    name: 'vue-xeditable',\n    components: {XCustomSelect},\n    props: {\n      value: {\n        type: [String, Number, Array]\n      },\n      type: {\n        type: String,\n        required: false,\n        default: 'text'\n      },\n      empty: {\n        type: String,\n        required: false,\n        default: 'Empty'\n      },\n      placeholder: {\n        type: String,\n        required: false,\n        default: ''\n      },\n      options: {\n        type: Array,\n        default: function () {\n          return []\n        }\n      },\n      allowEmptyOption: {\n        type: Boolean,\n        default: true\n      },\n      isOptionKeyFirst: {\n        type: Boolean,\n        default: true\n      },\n      remote: {\n        type: Object,\n        required: false,\n        default: function () {\n          return {\n            url: null,\n            method: 'PUT',\n            key: null,\n            resource: null,\n            headers: null\n          }\n        }\n      }\n    },\n    data () {\n      return {\n        isEditing: false,\n        isRemoteUpdating: false,\n        rawValue: this.value,\n        initialSelectValue: this.value\n      }\n    },\n    watch: {\n      value (newValue) {\n        this.rawValue = newValue\n      }\n    },\n    computed: {\n      $_VueXeditable_isValueEmpty () {\n        return this.rawValue === null || this.rawValue === undefined || this.rawValue === ''\n      },\n      $_VueXeditable_hasRemoteUpdate () {\n        return this.remote && this.remote.url && this.remote.url.length && this.remote.key && this.remote.key.length\n      },\n      $_VueXeditable_hasValidRemote () {\n        return this.$_VueXeditable_hasRemoteUpdate && ['PUT', 'POST'].includes(this.remote.method.toUpperCase())\n      },\n      $_VueXeditable_rawOptions () {\n        let emptyOption = (this.isOptionKeyFirst) ? [$_VueXeditable_emptyOptionValue, this.empty] : [this.empty, $_VueXeditable_emptyOptionValue]\n        return (this.allowEmptyOption) ? [emptyOption].concat(this.options) : this.options\n      }\n    },\n    methods: {\n      $_VueXeditable_getHTMLValue () {\n        if (this.$_VueXeditable_isValueEmpty) {\n          return this.empty\n        }\n        if (this.type === 'select') {\n          let opt = this.options.find(o => {\n            return o === this.rawValue\n          })\n          return (opt !== undefined) ? ((this.isOptionKeyFirst) ? opt[1] : opt[0]) : '?'\n        }\n        return this.rawValue\n      },\n      $_VueXeditable_onKeydown (e) {\n        if (!this.isEditing) {\n          return\n        }\n        if (e.keyCode === 13) {\n          this.$_VueXeditable_stopEditing(e)\n          this.$_VueXeditable_valueDidChange(e.target.value)\n        }\n        else if (e.keyCode === 27) {\n          this.$_VueXeditable_stopEditing(e)\n        }\n      },\n      $_VueXeditable_startEditing (e) {\n        this.isEditing = true\n        let that = this\n        that.$emit('start-editing', this.rawValue)\n        setTimeout(function () {\n          let inputs = Array.from(e.target.nextElementSibling.children)\n          inputs.forEach(i => {\n            i.focus()\n          })\n        }, 100)\n      },\n      $_VueXeditable_stopEditing (e) {\n        this.isEditing = false\n        let v = (this.type === 'select') ? this.initialSelectValue : this.rawValue\n        this.$emit('stop-editing', v)\n      },\n      $_VueXeditable_valueDidChange (newValue) {\n        if (this.type === 'select') {\n          this.$_VueXeditable_stopEditing() // Needed because no events can be associated with select / option?...\n        }\n        if (this.$_VueXeditable_hasValueChanged(newValue) || this.type === 'select') {\n          let v = (this.type === 'select') ? this.initialSelectValue : this.rawValue\n          this.$emit('value-will-change', v)\n\n          if (this.$_VueXeditable_hasRemoteUpdate) {\n            if (this.$_VueXeditable_hasValidRemote) {\n              this.$_VueXeditable_sendRemoteUpdate(newValue)\n                .then(() => {\n                  this.$emit('value-did-change', newValue)\n                })\n                .catch((error) => {\n                  this.$emit('value-remote-update-error', newValue, error)\n                })\n            } else {\n              console.error('VueXeditable Error: Invalid Remote Update configuration.')\n            }\n          } else {\n            this.$_VueXeditable_makeLocalUpdate(newValue)\n            this.$emit('value-did-change', newValue)\n          }\n        }\n      },\n      $_VueXeditable_hasValueChanged (newValue) {\n        return newValue !== this.rawValue\n      },\n      $_VueXeditable_makeLocalUpdate (newValue) {\n        // For select types, the value has already changed...\n        if (this.type === 'select') {\n          let optionKey = (this.isOptionKeyFirst) ? newValue[0] : newValue[1]\n          if (optionKey === $_VueXeditable_emptyOptionValue) {\n            this.rawValue = null\n          }\n          this.initialSelectValue = this.rawValue\n        } else {\n          this.rawValue = newValue\n        }\n      },\n      $_VueXeditable_sendRemoteUpdate (newValue) {\n        let payload = {}\n\n        if (this.remote.resource && this.remote.resource.length) {\n          let subpayload = {}\n          subpayload[this.remote.key] = newValue\n          payload[this.remote.resource] = subpayload\n        } else {\n          payload[this.remote.key] = newValue\n        }\n\n        return new Promise((resolve, reject) => {\n          this.isRemoteUpdating = true\n          axios({\n            method: this.remote.method,\n            url: this.remote.url,\n            headers: this.remote.headers || {},\n            data: payload\n          })\n            .then(response => {\n              this.isRemoteUpdating = false\n              this.$_VueXeditable_makeLocalUpdate(newValue)\n              resolve(newValue)\n            })\n            .catch(error => {\n              this.isRemoteUpdating = false\n              reject(error)\n            })\n        })\n      }\n    }\n  }\n</script>\n\n<style scoped>\n  .vue-xeditable {\n    width: auto;\n    color: #222;\n    cursor: pointer;\n    position: relative;\n    display: inline-block;\n  }\n\n  .vue-xeditable:hover {\n    color: #666;\n  }\n\n  .vue-form-control {\n    display: block;\n    width: 100%;\n    padding: 5px;\n    font-size: 14px;\n    line-height: 1.42857143;\n    color: #555;\n    background-color: #fff;\n    background-image: none;\n    border: 1px solid #ccc;\n    border-radius: 4px;\n    box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n    outline: none;\n  }\n\n  .vue-xeditable-value {\n    white-space: pre-wrap;\n  }\n\n  .vue-xeditable-empty {\n    color: #ea0002;\n    font-style: italic;\n  }\n\n  .editable-loader,\n  .editable-loader:before,\n  .editable-loader:after {\n    background: #999;\n    -webkit-animation: load1 1s infinite ease-in-out;\n    animation: load1 1s infinite ease-in-out;\n    width: 2px;\n    height: 2px;\n  }\n\n  .editable-loader {\n    position: absolute;\n    color: #999;\n    text-indent: -9999em;\n    margin: 3px;\n    font-size: 1px;\n    -webkit-transform: translateZ(0);\n    -ms-transform: translateZ(0);\n    transform: translateZ(0);\n    -webkit-animation-delay: -0.16s;\n    animation-delay: -0.16s;\n    top: 0;\n    left: 0;\n  }\n\n  .editable-loader:before,\n  .editable-loader:after {\n    position: absolute;\n    top: 0;\n    content: '';\n  }\n\n  .editable-loader:before {\n    left: -5px;\n    -webkit-animation-delay: -0.32s;\n    animation-delay: -0.32s;\n  }\n\n  .editable-loader:after {\n    left: 5px;\n  }\n\n  .vue-xeditable-control {\n    width: 100%;\n    display: inline-block;\n  }\n\n  .vue-editable-button {\n    display: inline-block;\n    padding: 3px 5px;\n    margin-bottom: 0;\n    font-size: 14px;\n    font-weight: normal;\n    line-height: 1.42857143;\n    text-align: center;\n    white-space: nowrap;\n    vertical-align: middle;\n    cursor: pointer;\n    -webkit-user-select: none;\n    -moz-user-select: none;\n    -ms-user-select: none;\n    user-select: none;\n    background-image: none;\n    border: 1px solid transparent;\n    border-radius: 4px;\n    font-size: 12px;\n    color: #fff;\n    background: #07c;\n    float: right;\n    margin-top: 10px;\n  }\n\n  @-webkit-keyframes load1 {\n    0%,\n    80%,\n    100% {\n      box-shadow: 0 0;\n      height: 20px;\n    }\n    40% {\n      box-shadow: 0 -2em;\n      height: 5px;\n    }\n  }\n\n  @keyframes load1 {\n    0%,\n    80%,\n    100% {\n      box-shadow: 0 0;\n      height: 10px;\n    }\n    40% {\n      box-shadow: 0 -2em;\n      height: 5px;\n    }\n  }\n</style>\n","import XEditable from './components/XEditable.vue'\n\nlet VueXeditable = {}\n\nVueXeditable.install = function (Vue, options) {\n  Vue.component('VueXeditable', XEditable)\n}\n\nexport default VueXeditable\n\n"],"names":["render","template","props","mounted","this","$refs","$_VueXeditable_Select","addEventListener","onKeyDown","beforeDestroy","removeEventListener","methods","onChange","keyValue","opt","options","find","o","toString","$emit","isSelected","option","value","e","$_VueXeditable_emptyOptionValue","name","components","XCustomSelect","type","String","Number","Array","required","default","empty","placeholder","allowEmptyOption","Boolean","isOptionKeyFirst","remote","Object","url","method","key","resource","headers","data","isEditing","isRemoteUpdating","rawValue","initialSelectValue","watch","newValue","computed","$_VueXeditable_isValueEmpty","undefined","$_VueXeditable_hasRemoteUpdate","length","$_VueXeditable_hasValidRemote","includes","toUpperCase","$_VueXeditable_rawOptions","let","emptyOption","concat","$_VueXeditable_getHTMLValue","$_VueXeditable_onKeydown","keyCode","$_VueXeditable_stopEditing","$_VueXeditable_valueDidChange","target","$_VueXeditable_startEditing","setTimeout","from","nextElementSibling","children","forEach","i","focus","v","$_VueXeditable_hasValueChanged","$_VueXeditable_sendRemoteUpdate","then","catch","error","console","$_VueXeditable_makeLocalUpdate","payload","subpayload","Promise","resolve","reject","axios","response","VueXeditable","install","Vue","component","XEditable"],"mappings":"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"}