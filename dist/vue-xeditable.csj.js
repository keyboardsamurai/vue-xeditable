"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var vue=_interopDefault(require("vue")),axios=_interopDefault(require("axios")),XCustomSelect={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("select",{ref:"$_VueXeditable_Select",domProps:{value:e.value},on:{change:function(t){e.onChange(t.target.value)}}},e._l(e.options,function(t){return i("option",{key:t[1],ref:"options",refInFor:!0,domProps:{value:t[1],selected:e.isSelected(t)}},[e._v(" "+e._s(t[0])+" ")])}))},staticRenderFns:[],template:"#custom-select",props:["value","options"],mounted:function(){this.$refs.$_VueXeditable_Select.addEventListener("keydown",this.onKeyDown,!1)},beforeDestroy:function(){this.$refs.$_VueXeditable_Select.removeEventListener("keydown",this.onKeyDown,!1)},methods:{onChange:function(e){var t=this.options.find(function(t){return t[1].toString()===e});this.$emit("input",t)},isSelected:function(e){return e===this.value},onKeyDown:function(e){this.$emit("keydown",e)}}},$_VueXeditable_emptyOptionValue=-999999999,XEditable={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"vue-xeditable"},[i("span",{directives:[{name:"show",rawName:"v-show",value:!e.isEditing&&!e.isRemoteUpdating,expression:"!isEditing && !isRemoteUpdating"}],staticClass:"vue-xeditable-value",class:{"vue-xeditable-empty":e.$_VueXeditable_isValueEmpty},domProps:{innerHTML:e._s(e.$_VueXeditable_getHTMLValue())},on:{click:e.$_VueXeditable_startEditing}}),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isEditing&&!e.isRemoteUpdating,expression:"isEditing && !isRemoteUpdating"}],staticClass:"vue-xeditable-control"},["text"===e.type?i("input",{staticClass:"vue-form-control",attrs:{type:"text",autofocus:""},domProps:{value:e.rawValue},on:{keydown:e.$_VueXeditable_onKeydown}}):"textarea"===e.type?i("textarea",{staticClass:"vue-form-control",on:{keydown:e.$_VueXeditable_onKeydown}},[e._v("      "+e._s(e.rawValue)+"\n    ")]):"number"===e.type?i("input",{staticClass:"vue-form-control",attrs:{type:"number"},domProps:{value:e.rawValue},on:{keydown:e.$_VueXeditable_onKeydown}}):"select"===e.type?i("x-custom-select",{staticClass:"vue-form-control",attrs:{type:"select",options:e.$_VueXeditable_rawOptions},on:{input:e.$_VueXeditable_valueDidChange,keydown:e.$_VueXeditable_onKeydown},model:{value:e.rawValue,callback:function(t){e.rawValue=t},expression:"rawValue"}}):e._e()],1),e._v(" "),i("div",{directives:[{name:"show",rawName:"v-show",value:e.isRemoteUpdating,expression:"isRemoteUpdating"}],staticClass:"editable-loader"})])},staticRenderFns:[],_scopeId:"data-v-cd131608",name:"vue-xeditable",components:{XCustomSelect:XCustomSelect},props:{value:{type:[String,Number]},type:{type:String,required:!1,default:"text"},empty:{type:String,required:!1,default:"Empty"},placeholder:{type:String,required:!1,default:""},options:{type:Array,default:function(){return[]}},allowEmptyOption:{type:Boolean,default:!0},isOptionKeyFirst:{type:Boolean,default:!0},remote:{type:Object,required:!1,default:function(){return{url:null,method:"PUT",key:null,resource:null,headers:null}}}},data:function(){return{isEditing:!1,isRemoteUpdating:!1,rawValue:this.value,initialSelectValue:this.value}},watch:{value:function(e){this.rawValue=e}},computed:{$_VueXeditable_isValueEmpty:function(){return null===this.rawValue||void 0===this.rawValue||""===this.rawValue},$_VueXeditable_hasRemoteUpdate:function(){return this.remote&&this.remote.url&&this.remote.url.length&&this.remote.key&&this.remote.key.length},$_VueXeditable_hasValidRemote:function(){return this.$_VueXeditable_hasRemoteUpdate()&&["PUT","POST"].includes(this.remote.method.toUpperCase())},$_VueXeditable_rawOptions:function(){var e=this.isOptionKeyFirst?[-999999999,this.empty]:[this.empty,-999999999];return this.allowEmptyOption?[e].concat(this.options):this.options}},methods:{$_VueXeditable_getHTMLValue:function(){var e=this;if(this.$_VueXeditable_isValueEmpty)return this.empty;if("select"===this.type){var t=this.options.find(function(t){return t===e.rawValue});return void 0!==t?this.isOptionKeyFirst?t[1]:t[0]:"?"}return this.rawValue},$_VueXeditable_onKeydown:function(e){this.isEditing&&(13===e.keyCode?(this.$_VueXeditable_stopEditing(e),this.$_VueXeditable_valueDidChange(e.target.value)):27===e.keyCode&&this.$_VueXeditable_stopEditing(e))},$_VueXeditable_startEditing:function(e){this.isEditing=!0,this.$emit("start-editing",this.rawValue),setTimeout(function(){Array.from(e.target.nextElementSibling.children).forEach(function(e){e.focus()})},100)},$_VueXeditable_stopEditing:function(e){this.isEditing=!1;var t="select"===this.type?this.initialSelectValue:this.rawValue;this.$emit("stop-editing",t)},$_VueXeditable_valueDidChange:function(e){var t=this;if("select"===this.type&&this.$_VueXeditable_stopEditing(),this.$_VueXeditable_hasValueChanged(e)||"select"===this.type){var i="select"===this.type?this.initialSelectValue:this.rawValue;this.$emit("value-will-change",i),this.$_VueXeditable_hasRemoteUpdate?this.$_VueXeditable_hasValidRemote?this.$_VueXeditable_sendRemoteUpdate(e).then(function(){t.$emit("value-did-change",e)}).catch(function(i){t.$emit("value-remote-update-error",e,i)}):console.error("VueXeditable Error: Invalid Remote Update configuration."):(this.$_VueXeditable_makeLocalUpdate(e),this.$emit("value-did-change",e))}},$_VueXeditable_hasValueChanged:function(e){return e!==this.rawValue},$_VueXeditable_makeLocalUpdate:function(e){if("select"===this.type){(this.isOptionKeyFirst?e[0]:e[1])===-999999999&&(this.rawValue=null),this.initialSelectValue=this.rawValue}else this.rawValue=e},$_VueXeditable_sendRemoteUpdate:function(e){var t=this,i={};if(this.remote.resource&&this.remote.resource.length){var a={};a[this.remote.key]=e,i[this.remote.resource]=a}else i[this.remote.key]=e;return new Promise(function(a,n){t.isRemoteUpdating=!0,axios({method:t.remote.method,url:t.remote.url,headers:t.remote.headers||{},data:i}).then(function(i){t.isRemoteUpdating=!1,t.$_VueXeditable_makeLocalUpdate(e),a(e)}).catch(function(e){t.isRemoteUpdating=!1,n(e)})})}}},VueXeditable={};VueXeditable.install=function(e,t){e.component("VueXeditable",XEditable)},module.exports=VueXeditable;
//# sourceMappingURL=vue-xeditable.csj.js.map
